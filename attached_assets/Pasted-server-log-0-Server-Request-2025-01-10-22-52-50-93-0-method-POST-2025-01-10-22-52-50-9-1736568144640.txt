server log:
[0] [Server] Request: {
2025-01-10 22:52:50.93
[0] method: 'POST',
2025-01-10 22:52:50.93
[0] path: '/api/testimonials/search',
2025-01-10 22:52:50.93
[0] origin: 'https://endorsehub.com',
2025-01-10 22:52:50.93
[0] authenticated: true,
2025-01-10 22:52:50.93
[0] userId: 13,
2025-01-10 22:52:50.93
[0] sessionId: 'uDnQcjOyFpQwG74SU4hUINkurjPQaja4',
2025-01-10 22:52:50.93
[0] body: { query: 'community advantage loans' }
2025-01-10 22:52:50.93
[0] }
2025-01-10 22:52:50.93
[0] [Auth Middleware] Checking auth: {
2025-01-10 22:52:50.93
[0] isAuthenticated: true,
2025-01-10 22:52:50.93
[0] hasUser: true,
2025-01-10 22:52:50.93
[0] userId: 13,
2025-01-10 22:52:50.93
[0] sessionId: 'uDnQcjOyFpQwG74SU4hUINkurjPQaja4'
2025-01-10 22:52:50.93
[0] }
2025-01-10 22:52:50.93
[0] [Auth] Premium required: { path: '/search', method: 'POST', userId: 13, isPremium: false }
2025-01-10 22:52:52.60
[0] }
2025-01-10 22:52:52.60
[0] [Auth Middleware] Checking auth: {
2025-01-10 22:52:52.60
[0] isAuthenticated: true,
2025-01-10 22:52:52.60
[0] hasUser: true,
2025-01-10 22:52:52.60
[0] userId: 13,
2025-01-10 22:52:52.60
[0] sessionId: 'uDnQcjOyFpQwG74SU4hUINkurjPQaja4'
2025-01-10 22:52:52.60
[0] }
2025-01-10 22:52:52.60
[0] [Stripe] Creating checkout session: {
2025-01-10 22:52:52.60
[0] body: { priceType: 'yearly' },
2025-01-10 22:52:52.60
[0] user: 13,
[0] path: '/create-checkout-session'
2025-01-10 22:52:52.60
[0] }
2025-01-10 22:52:52.69
[0] Price IDs configuration: {
2025-01-10 22:52:52.69
[0] monthly: 'price_1QUNxqLtNDD5vVOT34f2UG2t',
2025-01-10 22:52:52.69
[0] yearly: 'price_1QUNxqLtNDD5vVOTz7aStiUJ',
2025-01-10 22:52:52.69
[0] requested: 'yearly',
2025-01-10 22:52:52.69
[0] selectedPriceId: 'price_1QUNxqLtNDD5vVOTz7aStiUJ'
2025-01-10 22:52:52.69
[0] }
2025-01-10 22:52:52.69
[0] Creating Stripe checkout session with config: {
2025-01-10 22:52:52.69
[0] priceId: 'price_1QUNxqLtNDD5vVOTz7aStiUJ',
2025-01-10 22:52:52.69
[0] userEmail: 'bukayoodedele@gmail.com',
2025-01-10 22:52:52.69
[0] userId: 13,
2025-01-10 22:52:52.69
[0] successUrl: 'https://endorsehub.com/dashboard?payment=success&session_id={CHECKOUT_SESSION_ID}',
2025-01-10 22:52:52.69
[0] cancelUrl: 'https://endorsehub.com/dashboard?payment=cancelled'
2025-01-10 22:52:52.69
[0] }
2025-01-10 22:52:53.16
[0] Checkout session created: {
2025-01-10 22:52:53.16
[0] sessionId: 'cs_test_b1XM9mXQXtbgotW7A42BUyF7vOoLpSEnKERtYvyJv4322BI7CEyHvunc6l',
2025-01-10 22:52:53.16
[0] url: 'https://checkout.stripe.com/c/pay/cs_test_b1XM9mXQXtbgotW7A42BUyF7vOoLpSEnKERtYvyJv4322BI7CEyHvunc6l#fidkdWxOYHwnPyd1blpxYHZxWjA0SjFcSFdJcUtBQTBzU0pRVn9xQXJAZ0JMMHdOdHAxYXVNPWIwNkE2TmdHMXUyaVxxfUdJd2hGUEFGVDFBPGhjYE5NcG9SNWg8YUB2VnFKNXc9Z1M1PHBvNTVKbUtmX0lgRCcpJ2N3amhWYHdzYHcnP3F3cGApJ2lkfGpwcVF8dWAnPydocGlxbFpscWBoJyknYGtkZ2lgVWlkZmBtamlhYHd2Jz9xd3BgeCUl'
2025-01-10 22:52:53.16
[0] }
2025-01-10 22:52:53.16
[0]
2025-01-10 22:52:53.16
[Stripe] Checkout session created: {
2025-01-10 22:52:53.16
[0] id: 'cs_test_b1XM9mXQXtbgotW7A42BUyF7vOoLpSEnKERtYvyJv4322BI7CEyHvunc6l',
2025-01-10 22:52:53.16
[0] object: 'checkout.session',
2025-01-10 22:52:53.16
[0] adaptive_pricing: null,
2025-01-10 22:52:53.16
[0] after_expiration: null,
2025-01-10 22:52:53.16
[0] allow_promotion_codes: true,
[0] amount_subtotal: 96000,
2025-01-10 22:52:53.16
[0] amount_total: 96000,
2025-01-10 22:52:53.16
[0] automatic_tax: { enabled: false, liability: null, status: null },
2025-01-10 22:52:53.16
[0] billing_address_collection: 'required',
2025-01-10 22:52:53.16
[0] cancel_url: 'https://endorsehub.com/dashboard?payment=cancelled',
2025-01-10 22:52:53.16
[0] client_reference_id: null,
2025-01-10 22:52:53.16
[0] client_secret: null,
2025-01-10 22:52:53.16
[0] consent: null,
2025-01-10 22:52:53.16
[0] consent_collection: null,
2025-01-10 22:52:53.16
[0] created: 1736567573,
2025-01-10 22:52:53.16
[0] currency: 'usd',
2025-01-10 22:52:53.16
[0] currency_conversion: null,
2025-01-10 22:52:53.16
[0] custom_fields: [],
2025-01-10 22:52:53.16
[0] custom_text: {
2025-01-10 22:52:53.16
[0] after_submit: null,
2025-01-10 22:52:53.16
[0] shipping_address: null,
2025-01-10 22:52:53.16
[0] submit: null,
2025-01-10 22:52:53.16
[0] terms_of_service_acceptance: null
2025-01-10 22:52:53.16
[0] },
2025-01-10 22:52:53.16
[0] customer: null,
2025-01-10 22:52:53.16
[0] customer_creation: 'always',
2025-01-10 22:52:53.16
[0] customer_details: {
2025-01-10 22:52:53.16
[0] address: null,
2025-01-10 22:52:53.16
[0] email: 'bukayoodedele@gmail.com',
2025-01-10 22:52:53.16
[0] name: null,
2025-01-10 22:52:53.16
[0] phone: null,
[0] tax_exempt: 'none',
2025-01-10 22:52:53.16
[0] tax_ids: null
2025-01-10 22:52:53.16
[0] },
2025-01-10 22:52:53.16
[0] customer_email: 'bukayoodedele@gmail.com',
2025-01-10 22:52:53.16
[0] expires_at: 1736653972,
2025-01-10 22:52:53.16
[0] invoice: null,
2025-01-10 22:52:53.16
[0] invoice_creation: null,
2025-01-10 22:52:53.16
[0] livemode: false,
2025-01-10 22:52:53.16
[0] locale: null,
2025-01-10 22:52:53.16
[0] metadata: { priceType: 'yearly', userId: '13' },
2025-01-10 22:52:53.16
[0] mode: 'subscription',
2025-01-10 22:52:53.16
[0] payment_intent: null,
2025-01-10 22:52:53.16
[0] payment_link: null,
2025-01-10 22:52:53.16
[0] payment_method_collection: 'always',
2025-01-10 22:52:53.16
[0] payment_method_configuration_details: null,
2025-01-10 22:52:53.16
[0] payment_method_options: { card: { request_three_d_secure: 'automatic' } },
2025-01-10 22:52:53.16
[0] payment_method_types: [ 'card' ],
2025-01-10 22:52:53.16
[0] payment_status: 'unpaid',
2025-01-10 22:52:53.16
[0] phone_number_collection: { enabled: false },
2025-01-10 22:52:53.16
[0] recovered_from: null,
2025-01-10 22:52:53.16
[0] saved_payment_method_options: {
2025-01-10 22:52:53.16
[0] allow_redisplay_filters: [ 'always' ],
2025-01-10 22:52:53.16
[0] payment_method_remove: null,
2025-01-10 22:52:53.16
[0] payment_method_save: null
2025-01-10 22:52:53.16
[0] },
2025-01-10 22:52:53.16
[0] setup_intent: null,
[0] shipping_address_collection: null,
2025-01-10 22:52:53.16
[0] shipping_cost: null,
2025-01-10 22:52:53.16
[0] shipping_details: null,
2025-01-10 22:52:53.16
[0] shipping_options: [],
2025-01-10 22:52:53.16
[0] status: 'open',
2025-01-10 22:52:53.16
[0] submit_type: null,
2025-01-10 22:52:53.16
[0] subscription: null,
2025-01-10 22:52:53.16
[0] success_url: 'https://endorsehub.com/dashboard?payment=success&session_id={CHECKOUT_SESSION_ID}',
2025-01-10 22:52:53.16
[0] total_details: { amount_discount: 0, amount_shipping: 0, amount_tax: 0 },
2025-01-10 22:52:53.16
[0] ui_mode: 'hosted',
2025-01-10 22:52:53.16
[0] url: 'https://checkout.stripe.com/c/pay/cs_test_b1XM9mXQXtbgotW7A42BUyF7vOoLpSEnKERtYvyJv4322BI7CEyHvunc6l#fidkdWxOYHwnPyd1blpxYHZxWjA0SjFcSFdJcUtBQTBzU0pRVn9xQXJAZ0JMMHdOdHAxYXVNPWIwNkE2TmdHMXUyaVxxfUdJd2hGUEFGVDFBPGhjYE5NcG9SNWg8YUB2VnFKNXc9Z1M1PHBvNTVKbUtmX0lgRCcpJ2N3amhWYHdzYHcnP3F3cGApJ2lkfGpwcVF8dWAnPydocGlxbFpscWBoJyknYGtkZ2lgVWlkZmBtamlhYHd2Jz9xd3BgeCUl'
2025-01-10 22:52:53.16
[0] }
2025-01-10 22:53:10.88
[0] ' "cancel_url": "https://endorsehub.com/dashboard?payment=cancelled",\n' +
2025-01-10 22:53:10.88
[0] ' "client_reference_id": null,\n' +
2025-01-10 22:53:10.88
[0] ' "client_secret": null,\n' +
2025-01-10 22:53:10.88
[0] ' "consent": null,\n' +
2025-01-10 22:53:10.88
[0] ' "consent_collection": null,\n' +
2025-01-10 22:53:10.88
[0] ' "created": 1736567573,\n' +
2025-01-10 22:53:10.88
[0] ' "currency": "usd",\n' +
2025-01-10 22:53:10.88
[0] ' "currency_conversion": null,\n' +
2025-01-10 22:53:10.88
[0] ' "custom_fields": [\n' +
2025-01-10 22:53:10.88
[0] '\n' +
2025-01-10 22:53:10.88
[0] ' ],\n' +
2025-01-10 22:53:10.88
[0] ' "custom_text": {\n' +
2025-01-10 22:53:10.88
[0] ' "after_submit": null,\n' +
2025-01-10 22:53:10.88
[0] ' "shipping_address": null,\n' +
[0] ' "submit": null,\n' +
2025-01-10 22:53:10.88
[0] ' "terms_of_service_acceptance": null\n' +
2025-01-10 22:53:10.88
[0] ' },\n' +
2025-01-10 22:53:10.88
[0] ' "customer": "cus_RZ3swGvLRFnFOK",\n' +
2025-01-10 22:53:10.88
[0] ' "customer_creation": "always",\n' +
2025-01-10 22:53:10.88
[0] ' "customer_details": {\n' +
2025-01-10 22:53:10.88
[0] ' "address": {\n' +
2025-01-10 22:53:10.88
[0] ' "city": "State College",\n' +
2025-01-10 22:53:10.88
[0] ' "country": "US",\n' +
2025-01-10 22:53:10.88
[0] ' "line1": "350 Squirrel Drive",\n' +
2025-01-10 22:53:10.88
[0] ' "line2": "165",\n' +
2025-01-10 22:53:10.88
[0] ' "postal_code": "16801",\n' +
2025-01-10 22:53:10.88
[0] ' "state": "PA"\n' +
2025-01-10 22:53:10.88
[0] ' },\n' +
2025-01-10 22:53:10.88
[0] ' "email": "bukayoodedele@gmail.com",\n' +
2025-01-10 22:53:10.88
[0] ' "name": "Oluwabukayomi Odedele",\n' +
2025-01-10 22:53:10.88
[0] ' "phone": null,\n' +
2025-01-10 22:53:10.88
[0] ' "tax_exempt": "none",\n' +
2025-01-10 22:53:10.88
[0] ' "tax_ids": [\n' +
2025-01-10 22:53:10.88
[0] '\n' +
2025-01-10 22:53:10.88
[0] ' ]\n' +
2025-01-10 22:53:10.88
[0] ' },\n' +
2025-01-10 22:53:10.88
[0] ' "customer_email": "bukayoodedele@gmail.com",\n' +
2025-01-10 22:53:10.88
[0] ' "expires_at": 1736653972,\n' +
2025-01-10 22:53:10.88
[0] ' "invoice": "in_1Qfvl1LtNDD5vVOTWDWgytzQ",\n' +
2025-01-10 22:53:10.88
[0] ' "invoice_creation": null,\n' +
[0] ' "livemode": false,\n' +
2025-01-10 22:53:10.88
[0] ' "locale": null,\n' +
2025-01-10 22:53:10.88
[0] ' "metadata": {\n' +
2025-01-10 22:53:10.88
[0] ' "priceType": "yearly",\n' +
2025-01-10 22:53:10.88
[0] ' "userId": "13"\n' +
2025-01-10 22:53:10.88
[0] ' },\n' +
2025-01-10 22:53:10.88
[0] ' "mode": "subscription",\n' +
2025-01-10 22:53:10.88
[0] ' "payment_intent": null,\n' +
2025-01-10 22:53:10.88
[0] ' "payment_link": null,\n' +
2025-01-10 22:53:10.88
[0] ' "payment_method_collection": "always",\n' +
2025-01-10 22:53:10.88
[0] ' "payment_method_configuration_details": null,\n' +
2025-01-10 22:53:10.88
[0] ' "payment_method_options": {\n' +
2025-01-10 22:53:10.88
[0] ' "card": {\n' +
2025-01-10 22:53:10.88
[0] ' "request_three_d_secure": "automatic"\n' +
2025-01-10 22:53:10.88
[0] ' }\n' +
2025-01-10 22:53:10.88
[0] ' },\n' +
2025-01-10 22:53:10.88
[0] ' "payment_method_types": [\n' +
2025-01-10 22:53:10.88
[0] ' "card"\n' +
2025-01-10 22:53:10.88
[0] ' ],\n' +
2025-01-10 22:53:10.88
[0] ' "payment_status": "paid",\n' +
2025-01-10 22:53:10.88
[0] ' "phone_number_collection": {\n' +
2025-01-10 22:53:10.88
[0] ' "enabled": false\n' +
2025-01-10 22:53:10.88
[0] ' },\n' +
2025-01-10 22:53:10.88
[0] ' "recovered_from": null,\n' +
2025-01-10 22:53:10.88
[0] ' "saved_payment_method_options": {\n' +
2025-01-10 22:53:10.88
[0] ' "allow_redisplay_filters": [\n' +
[0] ' "always"\n' +
2025-01-10 22:53:10.88
[0] ' ],\n' +
2025-01-10 22:53:10.88
[0] ' "payment_method_remove": null,\n' +
2025-01-10 22:53:10.88
[0] ' "payment_method_save": null\n' +
2025-01-10 22:53:10.88
[0] ' },\n' +
2025-01-10 22:53:10.88
[0] ' "setup_intent": null,\n' +
2025-01-10 22:53:10.88
[0] ' "shipping_address_collection": null,\n' +
2025-01-10 22:53:10.88
[0] ' "shipping_cost": null,\n' +
2025-01-10 22:53:10.88
[0] ' "shipping_details": null,\n' +
2025-01-10 22:53:10.88
[0] ' "shipping_options": [\n' +
2025-01-10 22:53:10.88
[0] '\n' +
2025-01-10 22:53:10.88
[0] ' ],\n' +
2025-01-10 22:53:10.88
[0] ' "status": "complete",\n' +
2025-01-10 22:53:10.88
[0] ' "submit_type": null,\n' +
2025-01-10 22:53:10.88
[0] ' "subscription": "sub_1Qfvl1LtNDD5vVOTNK4KoJGP",\n' +
2025-01-10 22:53:10.88
[0] ' "success_url": "https://endorsehub.com/dashboard?payment=success\\u0026session_id={CHECKOUT_SESSION_ID}",\n' +
2025-01-10 22:53:10.88
[0] ' "total_details": {\n' +
2025-01-10 22:53:10.88
[0] ' "amount_discount": 0,\n' +
2025-01-10 22:53:10.88
[0] ' "amount_shipping": 0,\n' +
2025-01-10 22:53:10.88
[0] ' "amount_tax": 0\n' +
2025-01-10 22:53:10.88
[0] ' },\n' +
2025-01-10 22:53:10.88
[0] ' "ui_mode": "hosted",\n' +
2025-01-10 22:53:10.88
[0] ' "url": null\n' +
2025-01-10 22:53:10.88
[0] ' }\n' +
2025-01-10 22:53:10.88
[0] ' },\n' +
2025-01-10 22:53:10.88
[0] ' "livemode": false,\n' +
[0] ' "pending_webhooks": 1,\n' +
2025-01-10 22:53:10.88
[0] ' "request": {\n' +
2025-01-10 22:53:10.88
[0] ' "id": null,\n' +
2025-01-10 22:53:10.88
[0] ' "idempotency_key": null\n' +
2025-01-10 22:53:10.88
[0] ' },\n' +
2025-01-10 22:53:10.88
[0] ' "type": "checkout.session.completed"\n' +
2025-01-10 22:53:10.88
[0] '}'
2025-01-10 22:53:10.88
[0] }
2025-01-10 22:53:23.79
[0] userId: 13,
2025-01-10 22:53:23.79
[0] sessionId: 'uDnQcjOyFpQwG74SU4hUINkurjPQaja4',
2025-01-10 22:53:23.79
[0] body: {}
2025-01-10 22:53:23.79
[0] }
2025-01-10 22:53:23.96
[0] [Passport] Deserializing user: { userId: 13 }
2025-01-10 22:53:23.99
[0] [Passport] User deserialized successfully: { userId: 13 }
2025-01-10 22:53:23.99
[0]
2025-01-10 22:53:23.99
[Server] Request: {
2025-01-10 22:53:23.99
[0] method: 'GET',
2025-01-10 22:53:23.99
[0] path: '/api/auth/me',
2025-01-10 22:53:23.99
[0] origin: undefined,
2025-01-10 22:53:23.99
[0] authenticated: true,
2025-01-10 22:53:23.99
[0] userId: 13,
2025-01-10 22:53:23.99
[0] sessionId: 'uDnQcjOyFpQwG74SU4hUINkurjPQaja4',
2025-01-10 22:53:23.99
[0] body: {}
2025-01-10 22:53:23.99
[0] }
2025-01-10 22:53:23.99
[0] [Auth Route] Request received: {
2025-01-10 22:53:23.99
[0] method: 'GET',
[0] path: '/me',
2025-01-10 22:53:23.99
[0] body: {},
2025-01-10 22:53:23.99
[0] user: 13,
2025-01-10 22:53:23.99
[0] session: 'uDnQcjOyFpQwG74SU4hUINkurjPQaja4'
2025-01-10 22:53:23.99
[0] }
2025-01-10 22:53:23.99
[0] [Auth Middleware] Checking auth: {
2025-01-10 22:53:23.99
[0] isAuthenticated: true,
2025-01-10 22:53:23.99
[0] hasUser: true,
2025-01-10 22:53:23.99
[0] userId: 13,
2025-01-10 22:53:23.99
[0] sessionId: 'uDnQcjOyFpQwG74SU4hUINkurjPQaja4'
2025-01-10 22:53:23.99
[0] }
2025-01-10 22:53:23.99
[0] [Auth] Get current user: { userId: 13 }
2025-01-10 22:53:24.11
[0] [Passport] Deserializing user: { userId: 13 }
2025-01-10 22:53:24.15
[0] [Passport] User deserialized successfully: { userId: 13 }
2025-01-10 22:53:24.15
[0] [Server] Request: {
2025-01-10 22:53:24.15
[0] method: 'GET',
2025-01-10 22:53:24.15
[0] path: '/api/stats',
2025-01-10 22:53:24.15
[0] origin: undefined,
2025-01-10 22:53:24.15
[0] authenticated: true,
2025-01-10 22:53:24.15
[0] userId: 13,
2025-01-10 22:53:24.15
[0] sessionId: 'uDnQcjOyFpQwG74SU4hUINkurjPQaja4',
2025-01-10 22:53:24.15
[0] body: {}
2025-01-10 22:53:24.15
[0] }
2025-01-10 22:53:24.15
[0] [Stats Route] Request received: {
2025-01-10 22:53:24.15
[0] method: 'GET',
2025-01-10 22:53:24.15
[0] path: '/',